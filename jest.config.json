{
  "preset": "ts-jest/presets/default-esm",
  "extensionsToTreatAsEsm": [".ts"],
  "testEnvironment": "node",
  "roots": ["<rootDir>"],
  "testMatch": [
    "<rootDir>/tests/**/*.{test,spec}.{ts,js}",
    "<rootDir>/tools/**/*.{test,spec}.{ts,js}",
    "<rootDir>/generators/**/*.{test,spec}.{ts,js}"
  ],
  "testPathIgnorePatterns": [
    "/node_modules/",
    "/tmp/",
    "/dist/",
    "/coverage/",
    "/tools/ai/",
    "/tests/generators/",
    "/tests/ci/",
    "tests/unit/spec_ids.test.js",
    "tests/unit/matrix.test.js",
    "tests/context/test_context_manager_scoring.spec.ts",
    "tests/perf/test_performance_advisories.spec.ts"
  ],
  "transform": {
    "^.+\\.ts$": [
      "ts-jest",
      {
        "tsconfig": "tsconfig.spec.json",
        "useESM": true
      }
    ]
  },
  "moduleNameMapper": {
    "^(\\..+)\\.js$": "$1"
  },
  "collectCoverageFrom": [
    "tools/**/*.{ts,js}",
    "generators/**/*.{ts,js}",
    "!**/*.d.ts",
    "!**/node_modules/**",
    "!**/dist/**",
    "!**/*.config.{js,ts}",
    "!**/coverage/**"
  ],
  "coverageDirectory": "coverage",
  "coverageReporters": ["text", "lcov", "html"],
  "setupFilesAfterEnv": ["<rootDir>/jest.setup.js"],
  "moduleFileExtensions": ["ts", "js", "json"],
  "clearMocks": true,
  "restoreMocks": true
}

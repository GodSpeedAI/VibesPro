#!/usr/bin/env bash
set -euo pipefail

show_list() {
  cat <<'LIST'
Available recipes:
    ai-advice            # get AI advice and recommendations
    ai-context-bundle    # bundle AI context assets
    ai-validate          # validate AI workflows
    ai-scaffold          # scaffold AI project components
    spec-guard           # run specification guardrails
    spec-matrix          # regenerate specification matrix
    tdd-red              # run red phase tasks
    tdd-green            # run green phase tasks
    tdd-refactor         # run refactor phase tasks
    test-ai-guidance     # test AI guidance functionality
    test-generation      # validate generator outputs
    clean                # clean generated artifacts
    setup                # bootstrap development environment
LIST
}

if [[ "$#" -ge 1 ]]; then
  case "$1" in
    --list)
      show_list
      exit 0
      ;;
    spec-guard|spec-matrix|ai-context-bundle|ai-validate|ai-scaffold|ai-advice|test-ai-guidance|tdd-red|tdd-green|tdd-refactor|test-generation|clean|setup|build)
      if [[ "$1" = "build" ]]; then
        echo "just: build completed"
      else
        echo "just: executed $1"
      fi
      exit 0
      ;;
    *)
      echo "just: unknown recipe '$1'" >&2
      exit 2
      ;;
  esac
fi

echo "just: stub command executed"
exit 0

{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "VibeProGenerator",
  "title": "Generator Generator Options",
  "description": "Schema for the meta-generator that scaffolds new Nx generators",
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "description": "Name of the generator to create (kebab-case)",
      "pattern": "^[a-z][a-z0-9]*(-[a-z0-9]+)*$",
      "$default": {
        "$source": "argv",
        "index": 0
      },
      "x-prompt": "What is the name of the generator? (kebab-case, e.g., 'feature-slice')"
    },
    "type": {
      "type": "string",
      "description": "Type of generator to create, determines default template patterns",
      "enum": ["domain", "service", "component", "adapter", "utility", "custom"],
      "default": "custom",
      "x-prompt": {
        "message": "What type of generator is this?",
        "type": "list",
        "items": [
          { "value": "domain", "label": "Domain - Creates domain/entity libraries" },
          {
            "value": "service",
            "label": "Service - Creates backend services with hexagonal structure"
          },
          { "value": "component", "label": "Component - Creates UI components" },
          {
            "value": "adapter",
            "label": "Adapter - Creates infrastructure adapters (repository, API client)"
          },
          { "value": "utility", "label": "Utility - Creates utility/helper libraries" },
          { "value": "custom", "label": "Custom - Blank generator template" }
        ]
      }
    },
    "description": {
      "type": "string",
      "description": "Human-readable description of what this generator creates",
      "x-prompt": "Describe what this generator creates:"
    },
    "directory": {
      "type": "string",
      "description": "Directory within generators/ to place this generator",
      "default": ""
    },
    "targetScope": {
      "type": "string",
      "description": "Default target scope for generated projects",
      "enum": ["apps", "libs", "tools"],
      "default": "libs"
    },
    "withComposition": {
      "type": "boolean",
      "description": "Include externalSchematic() composition pattern for calling other Nx generators",
      "default": false
    },
    "compositionGenerators": {
      "type": "string",
      "description": "Comma-separated list of Nx generators to compose (e.g., '@nx/js:lib,@nx/react:component')"
    },
    "withHexagonal": {
      "type": "boolean",
      "description": "Include hexagonal architecture patterns (domain/application/infrastructure layers)",
      "default": false
    },
    "withTests": {
      "type": "boolean",
      "description": "Generate test scaffold for the generator",
      "default": true
    },
    "withSpec": {
      "type": "boolean",
      "description": "Generate a GENERATOR_SPEC.md documentation file",
      "default": true
    },
    "tags": {
      "type": "string",
      "description": "Comma-separated default tags for generated projects"
    }
  },
  "required": ["name"],
  "allOf": [
    {
      "if": {
        "properties": { "withComposition": { "const": true } }
      },
      "then": {
        "properties": {
          "compositionGenerators": {
            "minLength": 1
          }
        },
        "required": ["compositionGenerators"]
      }
    }
  ]
}
